<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-adsense-account" content="ca-pub-6495605335963366">
    <title>Sprague Cats</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.16/dist/tailwind.min.css" rel="stylesheet">
    <script defer src="script.js"></script>
    <link rel="icon" type="image/png" href="assets/caticon.png">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1MV9BXLPDE"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-1MV9BXLPDE')
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6495605335963366"
         crossorigin="anonymous"></script>
</head>

<body class="bg-gray-100">

    <!-- Header -->
    <div class="fixed top-0 left-0 w-full bg-white shadow-md p-4 flex justify-between items-center">
        <div class="flex justify-between w-full align-center">
            <h1 class="text-gray-700 text-lg font-bold">üìç Sprague Cat Tracker</h1>
            <button class="bg-blue-50 border border-blue-500 hover:bg-blue-100 text-blue-500 font-bold py-2 px-4 rounded" onclick="shareLink()">
                Share
            </button >
        </div>
    </div>

    <!-- Content Container -->
    <div class="container mx-auto p-4 mb-16 mt-10">
        <div class="mt-10">

            <!-- Banner Card -->
            <div class="bg-white rounded-lg overflow-hidden shadow-lg shadow-md mb-4 p-4 flex justify-center flex-col">
                <h2 class="text-lg" >We are this old</h2 >
                <div class="grid auto-cols-max grid-flow-col gap-5 text-center">
                  <div class="flex flex-col">
                    <span class="countdown font-mono text-5xl">
                      <span id="days" style="--value:15;">10</span >
                    </span>
                    days
                  </div>
                  <div class="flex flex-col">
                    <span class="countdown font-mono text-5xl">
                      <span id="hours" style="--value:10;">10</span>
                    </span>
                    hours
                  </div>
                  <div class="flex flex-col">
                    <span class="countdown font-mono text-5xl">
                      <span id="mins" style="--value:24;">10</span>
                    </span>
                    min
                  </div>
                  <div class="flex flex-col">
                    <span class="countdown font-mono text-5xl">
                      <span id="secs" style="--value:${counter};">10</span>
                    </span>
                    sec
                  </div>
                </div>
            </div>

            <div class="bg-white sm:p-6 md:p-6 shadow-lg rounded-lg my-4">
                <h2 class="text-lg font-semibold text-gray-800 mb-5">Kitten Weight</h2>
                <div>
                    <canvas height="300" id="myChart"></canvas>
                </div>
            </div>

            <!-- Card Container -->
            <div id="cat-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4">
            </div>

            <!-- Gallery Link -->
            <div class="mt-4 bg-white rounded-lg overflow-hidden shadow-lg shadow-md mb-4 p-4 flex justify-between flex-wrap items-center">
                <p>More pictures:</p>
                <button class="bg-blue-50 border border-blue-500 hover:bg-blue-100 text-blue-500 font-bold py-2 px-4 rounded" onclick="location.href='/CatDashboard/gallery'" >
                  Go to Gallery
                </button>
            </div>
        </div>
    </div>

    <!-- Banner -->
    <div class="fixed bottom-0 left-0 w-full bg-blue-50 shadow-md p-4 flex justify-between items-center">
        <p class="text-gray-700">üì∫ View Kittens Live!</p>
        <a href="https://www.youtube.com/live/ZoxQbauLV5U" target="_blank" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">Go To Stream</a>
    </div>

</body>


<!-- timer functionality -->
<script>
const kittenBirthday = new Date(2024, 5, 8); // June 8, 2024

function updateAge() {
  console.log("Calling kitten age");

  const now = new Date();
  const ageInSeconds = Math.floor((now - kittenBirthday) / 1000);

  const seconds = ageInSeconds % 60;
  const minutes = Math.floor((ageInSeconds / 60) % 60);
  const hours = Math.floor((ageInSeconds / (60 * 60)) % 24);
  const days = Math.floor((ageInSeconds / (60 * 60 * 24)) % 30.44);

  document.getElementById("secs").textContent = `${seconds}`
  document.getElementById("mins").textContent = `${minutes}`
  document.getElementById("hours").textContent = `${hours}`
  document.getElementById("days").textContent = `${days}`
}

updateAge();
setInterval(updateAge, 1000);
</script>

<!-- share functionality -->
<script>
function shareLink() {
    const shareData = {
        title: 'Sprague Cats',
        text: 'Check out these kittens!',
        url: 'https://colbysprague.github.io/CatDashboard'
    };

    if (navigator.share) {
        navigator.share(shareData)
            .then(() => console.log('Shared successfully'))
            .catch((error) => console.error('Error sharing:', error));
    } else {
        // Fallback for browsers that do not support native sharing
        const tempInput = document.createElement('input');
        tempInput.value = shareData.url;
        document.body.appendChild(tempInput);
        tempInput.select();
        document.execCommand('copy');
        document.body.removeChild(tempInput);
        alert('Link copied to clipboard!');
    }
}
</script>

<!-- chart -->
<script>

    async function loadJSON() {
      try {
        const response = await fetch('kittenData.json')
        if (!response.ok) {
          alert("an error occured")
        }
        const data = await response.json()
        console.log(data)
      } catch (error) {
        console.error("Couldnt fetch JSON data")
      }
    }

    let catData = [
        {
            name: "Fuzz Lightyear",
            weights: [250, 265, 278, 302],
            emoji: "https://emoji.aranja.com/static/emoji-data/img-apple-160/1f680.png",
            color: "rgb(255, 99, 132)",
        },
        {
            name: "Fats Domino",
            weights: [250, 265, 278, 332],
            emoji: "https://emoji.aranja.com/static/emoji-data/img-apple-160/1f3b2.png",
            color: "rgb(150, 150, 150)",
        },
        {
            name: "Darth Vader",
            weights: [250, 265, 278, 312],
            emoji: "https://emoji.aranja.com/static/emoji-data/img-apple-160/1f608.png",
            color: "rgb(128, 0, 128)",
        },
        {
            name: "Godzilla",
            weights: [250, 265, 278, 350],
            emoji: "https://emoji.aranja.com/static/emoji-data/img-apple-160/1f98d.png",
            color: "rgb(150, 150, 150)",
        },
    ];

    const onResizeFunction = (chart) => {
        console.log("resizing", chart.width);
    };

    function createImage(image, url) {
        image = image.cloneNode();

        image.height = 30;
        image.width = 30;
        image.src = url;
        return image;
    }

    let chartLabels = ["6,25", "6/26", "6/27", "6/28", "6/29"];
    const ctx = document.getElementById('myChart');

    new Chart(ctx, {
      type: "line",
      data: {
          labels: chartLabels,
          datasets: catData.map((cat) => ({
              label: cat.name,
              backgroundColor: cat.color,
              borderColor: cat.color,
              data: cat.weights,
              pointStyle: function (context) {
                  return context.dataIndex === cat.weights.length - 1
                      ? createImage(new Image(), cat.emoji)
                      : "circle";
              },
              tension: 0.4,
          })),
      },
      options: {
          maintainAspectRatio: false,
          plugins: {
              legend: {
                  display: false,
              },
          },
          scales: {
              y: {
                  beginAtZero: false,
                  max: 385,
              },
          },
      },
})
</script>
</html>
